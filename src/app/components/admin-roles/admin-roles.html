<div class="admin-container">
  <div class="page-header">
    <h1>Matriz de Permisos</h1>
    <p class="text-muted">Selecciona la casilla correspondiente para asignar un rol al usuario.</p>
  </div>

  <div class="table-responsive">
    <table class="matrix-table">
      <thead>
        <tr>
          <th class="user-col">Usuario / Rol</th>
          @for (rol of roles(); track rol.id) {
            <th class="role-header">
              <div class="role-title">{{ rol.nombre }}</div>
            </th>
          }
        </tr>
      </thead>
      <tbody>
        @for (user of users(); track user.id) {
          <tr [class.highlight]="user.idRol === 1"> <td class="user-cell">
              <div class="user-info">
                <span class="user-name">{{ user.nombreCompleto }}</span>
                <span class="user-email">{{ user.email }}</span>
              </div>
            </td>

            @for (rol of roles(); track rol.id) {
              <td class="check-cell" (click)="changeRole(user, rol.id)">
                <div class="custom-radio">
                  <input type="radio" 
                         [name]="'role_' + user.id" 
                         [checked]="user.idRol === rol.id"
                         (change)="changeRole(user, rol.id)"> <span class="checkmark"></span>
                </div>
              </td>
            }

          </tr>
        }
      </tbody>
    </table>
  </div>
</div>